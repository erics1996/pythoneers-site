<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Erics">
        <link rel="canonical" href="https://pythoneers.cn/python/built-in-module.html">
        <link rel="shortcut icon" href="../img/favicon.ico">
<meta name="keywords"
      content="python入门,python学习,python文档,python教程,python,django,flask,python web,python爬虫,python人工智能,python数据分析,python深度学习,python量化交易"/>
<meta http-equiv="Content-Type" content="text/html;charset=gb2312"/>
<meta name="sogou_site_verification" content="atcH4bxi4f"/>

<title>Python开发栈 - Python全栈开发学习网</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../css/nav.css" rel="stylesheet">
        <link href="../css/public.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Python开发栈</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="python-basis.html">Python基础</a>
</li>
                                    
<li >
    <a href="python-advance.html">Python进阶</a>
</li>
                                    
<li >
    <a href="python-senior.html">Python高级</a>
</li>
                                    
<li class="active">
    <a href="built-in-module.html">Python内置模块</a>
</li>
                                    
<li >
    <a href="external-module.html">Python第三方模块</a>
</li>
                                    
<li >
    <a href="algorithm.html">Python数据结构与算法</a>
</li>
                                    
<li >
    <a href="design-pattern.html">Python设计模式</a>
</li>
                                    
<li >
    <a href="office-automation.html">Python办公自动化</a>
</li>
                                    
<li >
    <a href="interviews-python.html">Python核心知识</a>
</li>
                                    
<li >
    <a href="interviews-network.html">Python网络相关知识</a>
</li>
                                    
<li >
    <a href="nowcoder-sword-offer.html">剑指Offer刷题</a>
</li>
                                    
<li >
    <a href="leetcode-algorithm.html">Leetcode算法刷题</a>
</li>
                                    
<li >
    <a href="leetcode-db.html">Leetcode数据库刷题</a>
</li>
                                    
<li >
    <a href="leetcode-multithreading.html">Leetcode多线程刷题</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python Web <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../python-web/flask.html">Flask基础</a>
</li>
                                    
<li >
    <a href="../python-web/interviews-flask.html">Flask核心知识</a>
</li>
                                    
<li >
    <a href="../python-web/project-flask.html">Flask实战篇</a>
</li>
                                    
<li >
    <a href="../python-web/django.html">Django基础</a>
</li>
                                    
<li >
    <a href="../python-web/interviews-django.html">Django核心知识</a>
</li>
                                    
<li >
    <a href="../python-web/project-django.html">Django实战篇</a>
</li>
                                    
<li >
    <a href="../python-web/drf.html">DRF基础</a>
</li>
                                    
<li >
    <a href="../python-web/celery.html">Celery异步框架</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python GUI <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../gui/pyqt5.html">PyQt5</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">网络爬虫 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../web-crawler/scrapy.html">Scrapy</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">数据分析 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../data-analysis/numpy.html">NumPy</a>
</li>
                                    
<li >
    <a href="../data-analysis/pandas.html">Pandas</a>
</li>
                                    
<li >
    <a href="../data-analysis/matplotlib.html">Matplotlib</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">计算机视觉 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../computer-vision/opencv.html">OpenCV</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">机器学习 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../machine-learning/quantitative-trading.html">机器学习与量化交易</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">深度学习 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../deep-learning/tensorflow.html">TensorFlow</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                            <li >
                                <a rel="next" href="python-senior.html">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="external-module.html">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#_1">内置模块</a></li>
            <li><a href="#1-sys">1. sys</a></li>
            <li><a href="#2-os">2. os</a></li>
            <li><a href="#3-json">3. json</a></li>
            <li><a href="#4-pickle">4. pickle</a></li>
            <li><a href="#5-shutil">5. shutil</a></li>
            <li><a href="#6-datetime">6. datetime</a></li>
            <li><a href="#7-time">7. time</a></li>
            <li><a href="#8-logging">8. logging</a></li>
            <li><a href="#9-md5">9. md5</a></li>
            <li><a href="#10-getpass">10. getpass</a></li>
            <li><a href="#11-csv">11. csv</a></li>
            <li><a href="#12-timeit">12. timeit</a></li>
            <li><a href="#13-random">13. random</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><img alt="内置模块" src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=97021528,3921704330&amp;fm=26&amp;gp=0.jpg" /></p>
<h4 id="_1">内置模块</h4>
<p>Python 内置库(模块)是 Python 内部提供的库，可以帮助我们实现一些基本的功能。我们安装 Python 后可以直接使用，不需要再次安装。可以通过 <kbd>sys.argv</kbd>
来查看 Python 所有内置库。库可以是一个文件，也可以是一个文件夹。
<hr></p>
<h5 id="1-sys">1. sys</h5>
<p>sys模块中包含Python解释器相关的数据。如引用次数：</p>
<p><kbd>sys.getrefcount()</kbd>：获取一个值的应用计数</p>
<pre><code class="python">''''
sys模块中，pthon解释器相关的数据
获取一个值的应用计数
'''
import sys
a = [1,2,3]
b=a
print(sys.getrefcount(a))
'''
3
'''
</code></pre>

<p><kbd>sys.getrecursionlimit()</kbd>：获取python默认支持的递归数量</p>
<pre><code class="python">''''
sys模块中，pthon解释器相关的数据
python默认支持的递归数量
'''
import sys
print(sys.getrecursionlimit())
'''
1000
'''
</code></pre>

<p><kbd>sys.stdout.write()</kbd>：输出，print函数内部会调用它</p>
<pre><code class="python">''''
输入输出：print函数内部会调用
'''
import sys

# 不能是数字，只能是字符串。默认不换行，print函数内部会调用它。
sys.stdout.write('520')
sys.stdout.write('kiku')
'''
520kiku
'''
</code></pre>

<p>例1：进度条的实现：</p>
<pre><code class="python"># \n：换行
# \t：制表符
# \r：回到当前行的起始位置
print('thanlon', end='')
print('kiku')

print('thanlon\r', end='')
print('kiku')
'''
thanlonkiku
kiku
'''
</code></pre>

<pre><code class="python"># coding:utf-8
'''
使用\r做进度条
'''
import time

for i in range(1, 101):
    msg = '%s%%\r' % i
    print(msg, end='')
    time.sleep(0.05)
'''
100%
'''
</code></pre>

<p>例2：读文件的进度条：</p>
<pre><code class="python"># coding:utf-8
'''
进度条
'''
import os

# 读取文件的大小(字节大小)
file_size = os.stat('video.mp4').st_size
# 一点一点读文件
read_size = 0
with open('video.mp4', mode='rb') as f1, open('tmp.mp4', mode='wb')as f2:
    while read_size &lt; file_size:
        chunk = f1.read(1024)  # 每次最多读取1024字节
        f2.write(chunk)
        read_size += len(chunk)
        v = int(read_size / file_size * 100)
        print('%s%%\r' % v, end='')
</code></pre>

<p><img alt="在这里插入图片描述" src="../img/module20200907.gif" /></p>
<p><kbd>sys.argv</kbd>：获取用户的执行脚本的路径</p>
<pre><code class="python"># coding:utf-8
import sys

print(sys.argv)
'''
['E:/pycharmProjects/untitled/test.py']
'''
</code></pre>

<pre><code class="python"># coding:utf-8
'''
让用户执行脚本传入要删除的文件路径，在内部帮助用户将目录删除
'''
import sys

'''
获取用户执行的脚本时，传入参数
如：D:\Python37\python.exe E:/pycharmProjects/untitled/test.py D:/test（参数是“D:/test”）
sys.argv = ['E:/pycharmProjects/untitled/test.py', 'D:/test']
'''
# 获取参数
path = sys.argv[1]  # path =D:/test
# 删除文件目录
import shutil

shutil.rmtree(path)
</code></pre>

<p><kbd>sys.path</kbd>：Python导入模块，会按照 <font>sys.path</font> 中的路径依次查找模块</p>
<pre><code class="python">import sys

for i in sys.path:
    print(i)
'''
E:\pycharmProjects\practice # 执行py文件会向sys.path中添加一个路径，可忽略。D:\Python37\python.exe E:/pycharmProjects/practice/test.py
E:\pycharmProjects\practice # 把当前pycharm中project路径也添加到sys.path中，可忽略。
C:\Program Files\JetBrains\PyCharm 2019.1.3\helpers\pycharm_display
D:\Python37\python37.zip
D:\Python37\DLLs
D:\Python37\lib
D:\Python37
D:\Python37\lib\site-packages
D:\Python37\lib\site-packages\turtle-0.0.2-py3.7.egg
D:\Python37\lib\site-packages\pyyaml-5.1.1-py3.7-win-amd64.egg
C:\Program Files\JetBrains\PyCharm 2019.1.3\helpers\pycharm_matplotlib_backend # pycharm中添加的，忽略
'''
</code></pre>

<p>内置模块会通过一下路径引入：</p>
<pre><code class="python">'''
D:\Python37\python37.zip
D:\Python37\DLLs
D:\Python37\lib
D:\Python37
D:\Python37\lib\site-packages
D:\Python37\lib\site-packages\turtle-0.0.2-py3.7.egg
D:\Python37\lib\site-packages\pyyaml-5.1.1-py3.7-win-amd64.egg
'''
</code></pre>

<p>我们不要把自定义的模块放到这些路径下，否则 Python 一旦卸载，这些模块也会被清除。当然我们可以临时把自定义模块的所在路径放到sys.path中：</p>
<pre><code class="python">import sys

# 如果我们自定义的模块在D:/下，可以把这个路径加入path的列表中
sys.path.append(r'D:/')
print(sys.path)
</code></pre>

<hr>

<h5 id="2-os">2. os</h5>
<p>os模块可以获取与操作系统相关的数据，如：</p>
<p><kbd>os.path.exists()</kbd>：文件是否存在</p>
<pre><code class="python"># coding:utf-8
import os

if os.path.exists('E:\pycharmProjects\practice\log.txt'):
    print('yes!')
'''
yes!
'''
</code></pre>

<p><kbd>os.stat('xxx.txt').st_size</kbd>：获取文件的大小</p>
<pre><code class="python"># coding:utf-8
import os

v = os.stat('E:\pycharmProjects\practice\log.txt').st_size  # 字节
print(v)  # 9
</code></pre>

<p><kbd>os.path.abspath(path)</kbd>：获取文件的绝对路径
os.path.abspath(path)</p>
<pre><code class="python"># coding:utf-8
import os

path = 'log.txt'
v = os.path.abspath(path)
print(v)
'''
E:\pycharmProjects\practice\log.txt
'''
</code></pre>

<p><kbd>os.path.dirname(path)</kbd>：获取文件或目录的上一级目录</p>
<pre><code class="python"># coding:utf-8
import os

path = 'E:\pycharmProjects\practice\log.txt'
path2 = 'E:\pycharmProjects\practice\test'
v = os.path.dirname(path)  # E:\pycharmProjects\practice
v2 = os.path.dirname(path2)  # E:\pycharmProjects\practice
print(v)
print(v2)
'''
E:\pycharmProjects\practice
E:\pycharmProjects
'''
</code></pre>

<p><kbd>os.listdir(r'E:\pycharmProjects\practice\test')</kbd>：拼接路径</p>
<pre><code class="python"># coding:utf-8
import os

path = 'E:\pycharmProjects\practice'
file_name = 'log.txt'
res1 = os.path.join(file_name, path)  # 注意顺序
res2 = os.path.join(path, file_name)
res3 = os.path.join(path, 'test', file_name)
print(res1)
print(res2)
print(res3)
'''
E:\pycharmProjects\practice
E:\pycharmProjects\practice\log.txt
E:\pycharmProjects\practice\test\log.txt
'''
</code></pre>

<p>例1：获取一个目录下所有的文件(第一层)：</p>
<pre><code class="python"># coding:utf-8
import os

res = os.listdir(r'E:\pycharmProjects\practice\test')
print(res)  # ['index.html', 'log.txt']
for item in res:
    print(item)
'''
index.html
log.txt
'''
</code></pre>

<p>例2：获取一个目录下所有的文件(所有层):</p>
<pre><code class="python"># coding:utf-8
import os

res = os.walk(r'E:\pycharmProjects\practice')
print(res)  # &lt;generator object walk at 0x00000237D9C85570&gt;生成器
</code></pre>

<pre><code class="python"># coding:utf-8
import os

res = os.walk(r'E:\pycharmProjects\practice')

for item in res:
    print(item)
'''
('E:\\pycharmProjects\\practice', ['.idea', 'test'], ['test.py'])
('E:\\pycharmProjects\\practice\\.idea', [], ['misc.xml', 'modules.xml', 'practice.iml', 'workspace.xml'])
('E:\\pycharmProjects\\practice\\test', [], ['index.html', 'log.txt'])
'''
</code></pre>

<pre><code class="python"># coding:utf-8
import os

res = os.walk(r'E:\pycharmProjects\practice')

for a, b, c in res:
    '''
    a:正在查看的目录
    b:此目录下的文件夹
    c:此目录下的文件
    '''
    print(a)
    print(b)
    print(c)
    '''
    E:\pycharmProjects\practice
    ['.idea', 'test']
    ['test.py']
    E:\pycharmProjects\practice\.idea
    []
    ['misc.xml', 'modules.xml', 'practice.iml', 'workspace.xml']
    E:\pycharmProjects\practice\test
    []
    ['index.html', 'log.txt']
    '''
</code></pre>

<p>例2：找到目录中的所有文件（重点）：</p>
<pre><code class="python"># coding:utf-8
import os

res = os.walk(r'E:\pycharmProjects\practice')

for a, b, c in res:
    '''
    a:正在查看的目录
    b:此目录下的文件夹
    c:此目录下的文件
    '''
    # print(a)
    # print(b)
    # print(c)
    '''
    E:\pycharmProjects\practice
    ['.idea', 'test']
    ['test.py']
    E:\pycharmProjects\practice\.idea
    []
    ['misc.xml', 'modules.xml', 'practice.iml', 'workspace.xml']
    E:\pycharmProjects\practice\test
    []
    ['index.html', 'log.txt']
    '''
    for item in c:
        path = os.path.join(a, item)
        print(path)
    '''
    E:\pycharmProjects\practice\test.py
    E:\pycharmProjects\practice\.idea\misc.xml
    E:\pycharmProjects\practice\.idea\modules.xml
    E:\pycharmProjects\practice\.idea\practice.iml
    E:\pycharmProjects\practice\.idea\workspace.xml
    E:\pycharmProjects\practice\test\index.html
    E:\pycharmProjects\practice\test\log.txt
    '''
</code></pre>

<hr>

<h5 id="3-json">3. json</h5>
<p>我们都知道json格式是一个特殊的字符串，而Python内置的json模块可以对json格式的字符串进行序列化与反序列化，</p>
<p><kbd>json.dumps()</kbd>：序列化，将Python的数据类型转换为json字符串的格式：</p>
<pre><code class="python">import json

v = [1, 2, 3, 'thanlon', True, {'name': 'thanlon', 'age': 23}]
# 序列化，将python的值转换为json格式的字符串
v2 = json.dumps(v)
print(v2)
'''
[1, 2, 3, &quot;thanlon&quot;, true, {&quot;name&quot;: &quot;thanlon&quot;, &quot;age&quot;: 23}]
'''
</code></pre>

<p>序列化元组，会把元组变为列表:</p>
<pre><code class="python">import json

v = ('thanlon', 23)
v2 = json.dumps(v)
print(type(v2), v2)
'''
&lt;class 'str'&gt; [&quot;thanlon&quot;, 23]
'''
</code></pre>

<p>序列化集合，会报错：</p>
<pre><code class="python">import json

v = {'thanlon', 23}
# 反序列化，将json格式的字符串转换成python的数据类型
v2 = json.dumps(v)
'''
TypeError: Object of type set is not JSON serializable
'''
</code></pre>

<p>支持序列化成json字符串的数据类型有：</p>
<pre><code class="python"># 来自encoder.py文件
&quot;&quot;&quot;
+-------------------+---------------+
| Python            | JSON          |
+===================+===============+
| dict              | object        |
+-------------------+---------------+
| list, tuple       | array         |
+-------------------+---------------+
| str               | string        |
+-------------------+---------------+
| int, float        | number        |
+-------------------+---------------+
| True              | true          |
+-------------------+---------------+
| False             | false         |
+-------------------+---------------+
| None              | null          |
+-------------------+---------------+
&quot;&quot;&quot;
</code></pre>

<p>序列化字典和列表的时候，如果字典和列表中有中文，在序列化为json格式字符串时需要保留中文，需要设置 <strong><code>ensure_ascii = False</code></strong>:</p>
<pre><code class="python"># coding:utf-8
import json

v = {'k1': '奈何', '哈哈': 'v2'}
val = json.dumps(v)  # 默认中文是unicode编码的
print(val)
'''
{&quot;k1&quot;: &quot;\u5948\u4f55&quot;, &quot;\u54c8\u54c8&quot;: &quot;v2&quot;}
'''
val2 = json.dumps(v, ensure_ascii=False)
print(val2)
'''
{&quot;k1&quot;: &quot;奈何&quot;, &quot;哈哈&quot;: &quot;v2&quot;}
'''
</code></pre>

<p><kbd>json.loads()</kbd>：反序列化，将json字符串的格式转换成python的数据类型：</p>
<pre><code class="python">import json

v = '[&quot;thanlon&quot;,23]'
# 反序列化，将json格式的字符串转换成python的数据类型
v2 = json.loads(v)
print(v2)
'''
['thanlon', 23]
'''
</code></pre>

<p>json字符串中需要构造成列表或字典(包裹其它内容)才可以被反序列化，传一个值也要构造成列表或字典：</p>
<pre><code class="python">import json
'''
list或dict包裹的内容才可以反序列化，只有字符串是不可以反序列化的
'''
v = 'thanlon'
v2 = json.loads(v)
print(v2)
'''
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
'''
</code></pre>

<p><kbd>json.dump()</kbd>：序列化后写入文件</p>
<pre><code class="python">import json

v = [1, 2, 3]
f = open('test.txt', mode='w', encoding='utf-8')
val = json.dump(v, f)
print(val)
</code></pre>

<p><kbd>json.load()</kbd>：读取文件数据并反序列化</p>
<pre><code class="python">import json

f = open('test.txt', mode='r', encoding='utf-8')
val = json.load(f)
print(val)
'''[1, 2, 3]'''
</code></pre>

<hr>

<h5 id="4-pickle">4. pickle</h5>
<p>json所有编程语言通用，但是只能序列化基本数据类型list/dict/int；而pickle，除了socket对象，Python中所有东西都可以被序列化。但缺点是序列化的内容只能Python语言识别。<br><br>
<kbd>pickle.dumps()</kbd>：用于将数据进行序列化，完成序列化后，会把数据转换成字节，是不可识别的</p>
<p><kbd>pickle.loads()</kbd>：用于反序列化<br><br>
例1：集合的序列化与反序列化</p>
<pre><code class="python">import pickle

v = {1, 2, 3, 4}
val = pickle.dumps(v)
print(val)
'''
b'\x80\x03cbuiltins\nset\nq\x00]q\x01(K\x01K\x02K\x03K\x04e\x85q\x02Rq\x03.'
'''
data = pickle.loads(val)
print(data)
'''
{1, 2, 3, 4}
'''
</code></pre>

<p>例2：函数的序列化与反序列化</p>
<pre><code class="python"># coding:utf-8
'''
函数的序列化与反序列化
'''
import pickle

def foo():
    print('foo')

v1 = pickle.dumps(foo)
print(v1)
data = pickle.loads(v1)
data()
'''
b'\x80\x03c__main__\nfoo\nq\x00.'
foo
'''
</code></pre>

<p><kbd>dump函数</kbd>：对数据进行序列化，同时可以保存序列化的内容（序列化后写入文件）</p>
<p><kbd>load函数</kbd>：读取文件数据并反序列化<br><br></p>
<pre><code class="python">import pickle

v = {1, 2, 3, 4}
f1 = open('test.txt', mode='wb')
val = pickle.dump(v, f1)  # 写入文件的时候写入的是字节类型的数据
f1.close()
f2 = open('test.txt', mode='rb')
data = pickle.load(f2)
f2.close()
print(data)
'''
{1, 2, 3, 4}
'''
</code></pre>

<hr>

<h5 id="5-shutil">5. shutil</h5>
<p>os模块的删除可能会出问题。可能是权限的原因，文件夹中不能有文件，有文件就删除不了。而shutil模块，文件和目录一块被强制删除。<br><br>
<kbd>shutil.rmtree()</kbd>：删除目录</p>
<pre><code class="python">import shutil
# 删除目录
shutil.rmtree('test')  # 不能删除文件
</code></pre>

<p><kbd>shutil.move()</kbd>：重命名目录和文件</p>
<pre><code class="python">import shutil

# 重命名目录和文件
shutil.move('test', 'tmp')
shutil.move('test.txt', 'tmp.txt')
</code></pre>

<p><kbd>shutil.make_archive()</kbd>：压缩</p>
<pre><code class="python">import shutil

# 压缩
shutil.make_archive('test', 'zip', 'test')  # &quot;zip&quot;, &quot;tar&quot;, &quot;gztar&quot;,&quot;bztar&quot;, or &quot;xztar&quot;
# shutil.make_archive('test', 'zip', 'E:\pycharmProjects\\untitled\\test')
</code></pre>

<p><kbd>shutil.unpack_archive()</kbd>：解压缩</p>
<pre><code class="python">import shutil

# 解压到当前目录
shutil.unpack_archive('test.zip', format='zip')  # 解压到当前目录
# 解压到指定目录，指定目录如果没有，可以创建
shutil.unpack_archive('test.zip', extract_dir='D:\\newdir', format='zip')
</code></pre>

<p><kbd>shutil.copyfileobj()</kbd>：将一个文件内容拷贝到另一个文件中</p>
<pre><code class="python">import shutil

# 将一个文件内容拷贝到另一个文件中
shutil.copyfileobj(open('test.txt', 'r'), open('log.txt', 'w'))
</code></pre>

<p><kbd>shutil.copyfile()</kbd>：拷贝文件</p>
<pre><code class="python">import shutil

# 拷贝文件
shutil.copyfile('test.txt','log.txt')
</code></pre>

<hr>

<h5 id="6-datetime">6. datetime</h5>
<p><kbd>datetime.datetime.now()</kbd>：获取本地时间</p>
<pre><code class="python">import datetime

print(datetime.datetime.now())
&quot;&quot;&quot;
2020-09-08 04:53:24.150263
&quot;&quot;&quot;
</code></pre>

<p><kbd>datetime.datetime.utcnow()</kbd>：获取UTC时间</p>
<pre><code class="python">import datetime

print(datetime.datetime.utcnow())
&quot;&quot;&quot;
2020-09-07 20:52:48.993547
&quot;&quot;&quot;
</code></pre>

<p>例1：datetime类型转换成字符串：</p>
<pre><code class="python">from datetime import datetime

ret = datetime.now().strftime('%Y-%m-%d %H:%M%S')  # 字符串中不能使用中文字符
print(ret)
</code></pre>

<p>例2：字符串转datetime类型：</p>
<pre><code class="python">from datetime import datetime

ret = datetime.strptime('2019-8-1', '%Y-%m-%d')
print(ret, type(ret))
'''
2019-08-01 00:00:00 &lt;class 'datetime.datetime'&gt;
'''
</code></pre>

<p>例3：datetime类型转换为时间戳类型</p>
<pre><code class="python">from datetime import datetime

ret = datetime.now().timestamp()
print(ret, type(ret))
'''
1599514412.457368 &lt;class 'float'&gt;
'''
</code></pre>

<p>例4：时间戳转换为datatime类型的时间</p>
<pre><code class="python">from datetime import datetime
import time

ctime = time.time()
ret = datetime.fromtimestamp(ctime)
print(ret, type(ret))
'''
2020-09-08 05:36:03.675019 &lt;class 'datetime.datetime'&gt;
'''
</code></pre>

<p><kbd>datetime.timezone()</kbd>：获取时区</p>
<p><kbd>datetime.datetime.utcnow()</kbd>：时间的加减乘除
获取时区：</p>
<pre><code class="python">from datetime import timezone, timedelta

tz = timezone(timedelta(hours=1))  # 获取时区，hours表示一小时间隔，表示东一区。西一区可以使用-1
print(tz)
'''
UTC+01:00
'''
</code></pre>

<p>获取指定时区的时间：</p>
<pre><code class="python">from datetime import timezone, timedelta, datetime

tz = timezone(timedelta(hours=1))  # 获取时区
ret = datetime.now(tz)  # 获取指定时区的时间
print(ret)
&quot;&quot;&quot;
2020-09-07 22:48:09.492275+01:00
&quot;&quot;&quot;
</code></pre>

<hr>

<h5 id="7-time">7. time</h5>
<p><kbd>time.time()</kbd>：获取时间戳</p>
<pre><code class="python">import time

print(time.time())
&quot;&quot;&quot;
1599507081.1925657
&quot;&quot;&quot;
</code></pre>

<blockquote>
<p><font>time.time( ) 是1970年到现在的秒数。</font></p>
</blockquote>
<p><kbd>time.sleep()</kbd>：同步等待多少时间(单位秒)</p>
<pre><code class="python">import time

print(time.time())
time.sleep(5)
print(time.time())  # 5s后才执行这一条语句
&quot;&quot;&quot;
1599507258.6660213
1599507263.6695352
&quot;&quot;&quot;
</code></pre>

<p><kbd>time.timezone()</kbd>：当前时区和格林尼治时间相差的秒数</p>
<pre><code class="python">import time

print(time.timezone)
&quot;&quot;&quot;
-28800
&quot;&quot;&quot;
</code></pre>

<hr>

<h5 id="8-logging">8. logging</h5>
<p>logging模块可以用来记录程序错误日志信息，<br><br>
<kbd>logging.basicConfig()</kbd>：为日志系统做基础的配置</p>
<p><kbd>logging.<strong>dir</strong>()</kbd>：获取logining模块的所有方法、属性</p>
<p><kbd>logging.error()</kbd>：可以把错误信息写入到日志文件中</p>
<p>记录到错误日志是需要设置级别的，只有级别大于函数中设置的级别才可以被写入日志文件！</p>
<p>例子：</p>
<pre><code class="python">import logging
import traceback

&quot;&quot;&quot;
asctime：时间，name：用户，levelname：级别，module：运行的模块，message：相关信息
level&gt;=30才会被写入日志文件，默认级别也就是30
&quot;&quot;&quot;
logger = logging.basicConfig(
    filename='log.txt',
    format='%(asctime)s - %(name)s - %(levelname)s - %(module)s：%(message)s',
    datefmt='%Y-%m-%d %H:%M:%S',
    level=30
)

def func():
    a = 10
    try:
        b = a / 0
    except Exception as e:
        print(e)  # division by zero
        logging.error(str(e))
        &quot;&quot;&quot;
        # 只是将e的信息写入日志，这是不够的
        2020-09-08 13:57:50 - root - ERROR - test：division by zero
        &quot;&quot;&quot;
        msg = traceback.format_exc()
        logging.error(msg)
        &quot;&quot;&quot;
        # 需要更加具体到错误的代码行数
        2020-09-08 13:59:04 - root - ERROR - test：Traceback (most recent call last):
            File &quot;/home/thanlon/test.py&quot;, line 20, in func
                b = a / 0
        ZeroDivisionError: division by zero
        &quot;&quot;&quot;

if __name__ == '__main__':
    func()
</code></pre>

<hr>

<h5 id="9-md5">9. md5</h5>
<p>简单的加密：如果撞库(将能想到的常用的密码加密，根据密文找明文)，会导致密码被泄露。</p>
<pre><code class="python">import hashlib

# 实例化对象
obj = hashlib.md5()
# 写入要加密的字节，python3中加密的必须是字节
obj.update('123456'.encode('utf-8'))
# 获取密文
ciphers = obj.hexdigest()
print(ciphers)
'''
e10adc3949ba59abbe56e057f20f883e
'''
</code></pre>

<p>加盐的加密：使用加盐可以解决撞库问题，增强密码的安全性。</p>
<pre><code class="python">import hashlib

# 实例化对象的时候顺便加盐
obj = hashlib.md5(b'thanlon')  # 加盐
# 写入要加密的字节，python3中加密的必须是字节
obj.update('123456'.encode('utf-8'))
# 获取密文
ciphers = obj.hexdigest()
print(ciphers)
'''
1a8c227a607ed3c09a39f4b6a6df8869
'''
</code></pre>

<p>封装加密函数：</p>
<pre><code class="python">import hashlib

SALT = b'thanlon'

def md5(pwd):
    &quot;&quot;&quot;
    # 自定义MD5函数
    :param pwd:
    :return:
    &quot;&quot;&quot;
    obj = hashlib.md5(SALT)
    # pwd是字符串，需要将其转换成字节
    obj.update(pwd.encode('utf-8'))
    # 返回密文
    return obj.hexdigest()

print(md5('123456'))
&quot;&quot;&quot;
1a8c227a607ed3c09a39f4b6a6df8869
&quot;&quot;&quot;
</code></pre>

<hr>

<h5 id="10-getpass">10. getpass</h5>
<p>可以让用户在终端输入密码不显示，注意只有在终端运行密码才会不显示：</p>
<pre><code class="python">import getpass

pwd = getpass.getpass('请输入密码：')
if pwd == '123456':
    print('密码正确！')
</code></pre>

<hr>

<h5 id="11-csv">11. csv</h5>
<p>csv即逗号分隔值(comma-separated values)，有时也称为字符分割值，是以纯文本形式存储表格数据。</p>
<p><kbd>csv.reader()</kbd>：csv文件的读取</p>
<pre><code class="py">import csv

with open('stuInfo.csv', 'r') as f:
    data = csv.reader(f)
    # print(data)  # data is a object&lt;_csv.reader object at 0x00000197FC4A4160&gt;
    for data_item in data:
        print(data_item)
'''
['1', 'thanlon', '10000']
['2', 'Maria', '20000']
'''
   for data_item in data:
       print(data_item[0], data_item[1], data_item[2])
'''
1 thanlon 10000
2 Maria 20000
'''
</code></pre>

<p><kbd>csv.writer()</kbd>：csv文件的写入</p>
<pre><code class="py">import csv

stu = ['3', 'Maria', 10000]
with open('stuInfo.csv', 'a', newline='') as f:  # 如果没有加newline=''写入一行后空行
    csv_writer = csv.writer(f, dialect='excel')
    csv_writer.writerow(stu)
</code></pre>

<hr>

<h5 id="12-timeit">12. timeit</h5>
<p>timeit模块可以用来计算代码执行的时间，</p>
<p><kbd>timeit.timeit()</kbd>：返回的是timerit模块中Timer类的timeit方法的执行结果，timeit函数的源码</p>
<pre><code class="python">def timeit(stmt=&quot;pass&quot;, setup=&quot;pass&quot;, timer=default_timer,
           number=default_number, globals=None):
    &quot;&quot;&quot;Convenience function to create Timer object and call timeit method.&quot;&quot;&quot;
    return Timer(stmt, setup, timer, globals).timeit(number)
</code></pre>

<p>timeit函数参数：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>stmt</td>
<td>用来放需要进行计算时间的代码，可以接收字符串的表达式、单个变量、函数</td>
</tr>
<tr>
<td>setup</td>
<td>可以用来传stmt的环境，例如import和一些参数之类的</td>
</tr>
<tr>
<td>number</td>
<td>执行是的次数，默认是1000000</td>
</tr>
<tr>
<td>其它</td>
<td>一般用不到，具体可查看文档</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><kbd>timeit.repeat()</kbd>：返回的是timeit模块中Timer类repeat方法的执行结果，repeat函数的源码</p>
<pre><code class="py">def repeat(stmt=&quot;pass&quot;, setup=&quot;pass&quot;, timer=default_timer,
           repeat=default_repeat, number=default_number, globals=None):
    &quot;&quot;&quot;Convenience function to create Timer object and call repeat method.&quot;&quot;&quot;
    return Timer(stmt, setup, timer, globals).repeat(repeat, number)
</code></pre>

<p>repeat函数比timeit函数多一个repeat参数：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>stmt</td>
<td>用来放需要进行计算时间的代码，可以接收字符串的表达式、单个变量、函数</td>
</tr>
<tr>
<td>setup</td>
<td>可以用来传stmt的环境，例如import和一些参数之类的</td>
</tr>
<tr>
<td>number</td>
<td>执行是的次数，默认是1000000</td>
</tr>
<tr>
<td>repeat</td>
<td>重复整个测试的个数，默认是3</td>
</tr>
<tr>
<td>其它</td>
<td>一般用不到，具体可查看文档</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>例1：测试列表推导式与for循环的执行时间(分别使用timeit函数和repeat函数)：</p>
<pre><code class="py">import timeit

stmt_list = '''
lst=[]
for i in range(10000):
    lst.append(i)
'''
if __name__ == '__main__':
    print(timeit.timeit('[i for i in range(10000)]', number=10000))
    print(timeit.timeit(stmt_list, number=10000))
'''
3.346147895
5.789892938
'''
</code></pre>

<pre><code class="py">import timeit

stmt_list = '''
lst=[]
for i in range(10000):
    lst.append(i)
'''
if __name__ == '__main__':
    print(timeit.repeat('[i for i in range(10000)]', repeat=2, number=10000))
    print(timeit.repeat(stmt_list, repeat=2, number=10000))
'''
[3.374952514, 3.4277178010000005]
[5.748379824000001, 5.8717959529999995] 
'''
</code></pre>

<hr>

<h5 id="13-random">13. random</h5>
<hr>

<!--回到顶部 start-->

<div style="width: 60px;height: auto;z-index: 99;bottom: 30%;position: fixed;right: 0" id="plug-ins">
    <div style="position: relative;float: right">
        <a target="" href="javascript:;" id="weibo"
           style="display: block;width: 40px;height: 40px;background-color: #c4351b;margin-top: 1px;">
            <img width="22" height="20" src="../img/weibo.png" alt=""
                 style="margin-top: 10px;margin-left: 9px">
        </a>
        <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=3330447288&site=qq&menu=yes" id="qq" style="display: block;width: 40px;height: 40px;background-color:#0e91e8;margin-top: 1px">
            <img width="20" height="20" src="../img/qq.png" 
                 style="margin-top: 10px;margin-left: 10px" alt="点击这里给我发消息" title="点击这里给我发消息">
        </a>
        <a href="javascript:" id="wechat"
           style="display: block;width: 40px;height: 40px;background-color:#01b901;margin-top:1px">
            <img width="22" height="20" src="../img/wechat.png"
                 style="margin-top: 10px;margin-left: 9px">
        </a>
        <a href="javascript:" id="go_top"
           style="display: none;width: 40px;height: 40px;background-color: #b5b5b5;margin-top: 1px">
            <img width="22" height="20" src="../img/top.png" alt=""
                 style="margin-top: 10px;margin-left: 9px">
        </a>
    </div>
</div>

<!--回到顶部 stop-->

<!--左侧广告 start-->

<div style="width: auto;height: auto;z-index: 99;position: fixed;left: 0;top: 70px;" id="google_ads">
        <div>
            <div style="width: 180px;height: auto"></div>
            <!-- Vertical -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-6937898095875663"
                 data-ad-slot="2927491642"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
</div>

<!--左侧广告 stop-->

<!--右侧广告 start-->

<div style="width: auto;height: auto;z-index: 99;position: fixed;right: 0;top: 70px;" id="google_ads">
        <div>
            <div style="width: 180px;height: auto"></div>
            <!-- Vertical -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-6937898095875663"
                 data-ad-slot="2927491642"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
</div>

<!--右侧广告 stop--></div>
        </div>

        <footer class="col-md-12">
<div class="container-fluid" style="background:#2C2C2C;color: #c1c1c1;font-weight: bold;margin-bottom: 2px">
    <div class="row">
        <div class="col-md-12  text-center" style="padding: 40px">
            <a href="https://tongji.baidu.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">百度统计</a>&nbsp;|
            <a href="https://ziyuan.baidu.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">百度搜索</a>&nbsp;|
            <a href="https://www.umeng.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">友盟</a>&nbsp;|
            <a href="https://www.tmall.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">天猫</a>&nbsp;|
            <a href="https://www.alimama.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">阿里妈妈</a>&nbsp;|
            <a href="https://blog.csdn.net/Thanlon" style="color:#c1c1c1;font-weight: bold" target="_blank">CSDN</a>&nbsp;|
            <a href="https://segmentfault.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">SegmentFault</a>&nbsp;|
            <!--        <a href="https://bysj39.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">39毕设网</a>&nbsp;|-->
            <a href="https://d5video.pythoneers.cn/" style="color:#c1c1c1;font-weight: bold" target="_blank">D5影视网</a>&nbsp;|
            <a href="https://ywyz.pythoneers.cn/" style="color:#c1c1c1;font-weight: bold" target="_blank">运维云栈</a>&nbsp;|
            <a href="https://www.mkdocs.org/" style="color:#c1c1c1;font-weight: bold" target="_blank">MkDocs</a>&nbsp;
            <!--        <a href="javascript:" style="color:#c1c1c1;font-weight: bold" target="_blank">β在线学习网</a>&nbsp;-->
            <!--          <a href="javascript:" style="color:#c1c1c1;font-weight: bold" target="_blank">阿尔法搜索</a>&nbsp;|-->
            <!--          <a href="javascript:" style="color:#c1c1c1;font-weight: bold" target="_blank">贝塔学习网</a>&nbsp;|-->
            <!--          <a href="javascript:" style="color:#c1c1c1;font-weight: bold" target="_blank">德尔塔操作系统</a>&nbsp;|-->
            <!--          <a href="javascript:" style="color:#c1c1c1;font-weight: bold" target="_blank">欧米伽影视</a>&nbsp;-->
            <br>
            <a href="https://docs.djangoproject.com/zh-hans/3.0/" style="color:#c1c1c1;font-weight: bold"
               target="_blank">Django</a>&nbsp;|
            <a href="https://flask.palletsprojects.com/en/1.1.x/" style="color:#c1c1c1;font-weight: bold"
               target="_blank">Flask</a>&nbsp;|
            <a href="https://www.django-rest-framework.org/" style="color:#c1c1c1;font-weight: bold"
               target="_blank">DRF</a>&nbsp;|
            <a href="https://cn.vuejs.org/" style="color:#c1c1c1;font-weight: bold" target="_blank">Vue</a>&nbsp;|
            <a href="https://www.nginx.com/" style="color:#c1c1c1;font-weight: bold" target="_blank">Nginx</a>&nbsp;|
            <a href="https://kubernetes.io/" style="color:#c1c1c1;font-weight: bold" target="_blank">Kubernetes</a>&nbsp;|
            <a href="https://zabbix.org/wiki/Main_Page" style="color:#c1c1c1;font-weight: bold"
               target="_blank">Zabbix</a>&nbsp;|
            <a href="https://tensorflow.google.cn/" style="color:#c1c1c1;font-weight: bold"
               target="_blank">TensorFlow</a>&nbsp;|
            <a href="https://docs.opencv.org/" style="color:#c1c1c1;font-weight: bold" target="_blank">OpenCV</a>&nbsp;
            <br>
            Copyright © 2020-2021&nbsp; pythoneers.cn. All Rights Reserved.&nbsp;Python开发栈 版权所有&nbsp;
            <br>
            <a target="_blank_" href="http://www.miit.gov.cn/" style="color:#c1c1c1;">豫ICP备19037971-2号</a>
            <!--            <a target="_blank">-->
            <!--                <img src="/static/home/images/beian.png" style="padding-bottom:6px">-->
            <!--                <span style="color:#c1c1c1;">豫公网安备 41152802000091号</span>-->
            <!--            </a>-->
            <span id="cnzz_stat_icon_1279280889">
            <a href="https://www.cnzz.com/stat/website.php?web_id=1279280889" target="_blank" title="站长统计">
              <img border="0" hspace="0" vspace="0" src="https://icon.cnzz.com/img/pic.gif">
            </a>
          </span>
        </div>
    </div>
</div>

        </footer>

        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../js/main.js" defer></script>
        <script src="../js/gotop.js" defer></script>
        <script src="../js/baiducount.js" defer></script>
<!--    <script async src="../js/somelib.js"></script>-->
<!--<script data-ad-client="ca-pub-6937898095875663" async-->
<!--        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>-->
<script data-ad-client="ca-pub-6937898095875663"
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    //baidu自动收录
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<script>
    //360自动收录
    (function () {
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
    })();
</script>


        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
